{% load static %}
<!DOCTYPE html>
<html lang="uz">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Telegram Sidebar - Day/Night Mode</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = {
      darkMode: 'class',
      theme: {
        extend: {
          colors: {
            telegram: {
              dark: {
                bg: '#0e1621',
                sidebar: '#17212b',
                active: '#3e546a',
                hover: '#222e3a',
                text: '#e6e6e6',
                muted: '#6b7b8c',
                border: '#0e1621',
                search: '#242f3d',
                accent: '#70b1e4',
                accentText: '#71aaeb',
                menuHeader: '#1f2c3a'
              },
              light: {
                bg: '#f0f2f5',
                sidebar: '#ffffff',
                active: '#e6f2ff',
                hover: '#f5f5f5',
                text: '#333333',
                muted: '#707579',
                border: '#d3d9de',
                search: '#f0f2f5',
                accent: '#0088cc',
                accentText: '#0088cc',
                menuHeader: '#f5f5f5'
              }
            }
          }
        }
      }
    }
  </script>
  <style type="text/tailwindcss">
    @layer utilities {
      .transition-all {
        transition: all 0.3s ease;
      }
      
      .scrollbar-hide {
        -ms-overflow-style: none;
        scrollbar-width: none;
      }
      
      .scrollbar-hide::-webkit-scrollbar {
        display: none;
      }
    }
  </style>
</head>
<body class="bg-telegram-dark-bg text-telegram-dark-text font-sans flex h-screen overflow-hidden transition-all dark:bg-telegram-light-bg dark:text-telegram-light-text">
  
  <!-- Sidebar -->
  <div class="w-[68px] h-screen bg-telegram-dark-sidebar flex flex-col items-center py-2.5 border-r border-telegram-dark-border flex-shrink-0 overflow-y-auto scrollbar-hide transition-all dark:bg-telegram-light-sidebar dark:border-telegram-light-border">
    <a href="#" class="menu-toggle relative w-[68px] h-12 flex flex-col items-center justify-center text-telegram-dark-muted my-1.5 no-underline transition-all text-xs rounded overflow-hidden dark:text-telegram-light-muted">
      <i class="fa-solid fa-bars text-xl mb-0.5"></i>
      <span>Menu</span>
    </a>
    <a href="#" class="menu-item relative w-[68px] h-12 flex flex-col items-center justify-center text-telegram-dark-muted my-1.5 no-underline transition-all text-xs rounded overflow-hidden bg-telegram-dark-active text-telegram-dark-accentText dark:bg-telegram-light-active dark:text-telegram-light-accent">
      <i class="fa-solid fa-comments text-xl mb-0.5"></i>
      <span>All chats</span>
    </a>
    <a href="#" class="menu-item relative w-[68px] h-12 flex flex-col items-center justify-center text-telegram-dark-muted my-1.5 no-underline transition-all text-xs rounded overflow-hidden dark:text-telegram-light-muted">
      <i class="fa-solid fa-book text-xl mb-0.5"></i>
      <span>IT House</span>
      <span class="unread-count absolute -top-0.5 right-2.5 bg-telegram-dark-accent text-white rounded-full min-w-[16px] h-4 text-xs flex items-center justify-center px-1 font-medium">3</span>
    </a>
    <a href="#" class="menu-item relative w-[68px] h-12 flex flex-col items-center justify-center text-telegram-dark-muted my-1.5 no-underline transition-all text-xs rounded overflow-hidden dark:text-telegram-light-muted">
      <i class="fa-solid fa-bullhorn text-xl mb-0.5"></i>
      <span>Kanallar</span>
    </a>
    <a href="#" class="menu-item relative w-[68px] h-12 flex flex-col items-center justify-center text-telegram-dark-muted my-1.5 no-underline transition-all text-xs rounded overflow-hidden dark:text-telegram-light-muted">
      <i class="fa-solid fa-music text-xl mb-0.5"></i>
      <span>blog</span>
      <span class="unread-count absolute -top-0.5 right-2.5 bg-telegram-dark-accent text-white rounded-full min-w-[16px] h-4 text-xs flex items-center justify-center px-1 font-medium">12</span>
    </a>
    <a href="#" class="menu-item relative w-[68px] h-12 flex flex-col items-center justify-center text-telegram-dark-muted my-1.5 no-underline transition-all text-xs rounded overflow-hidden dark:text-telegram-light-muted">
      <i class="fa-solid fa-robot text-xl mb-0.5"></i>
      <span>telegram bot</span>
    </a>
    <a href="#" class="menu-item relative w-[68px] h-12 flex flex-col items-center justify-center text-telegram-dark-muted my-1.5 no-underline transition-all text-xs rounded overflow-hidden dark:text-telegram-light-muted">
      <i class="fa-solid fa-folder text-xl mb-0.5"></i>
      <span>it guruhlar</span>
      <span class="unread-count absolute -top-0.5 right-2.5 bg-telegram-dark-accent text-white rounded-full min-w-[16px] h-4 text-xs flex items-center justify-center px-1 font-medium">1</span>
    </a>
    <a href="#" class="menu-item relative w-[68px] h-12 flex flex-col items-center justify-center text-telegram-dark-muted my-1.5 no-underline transition-all text-xs rounded overflow-hidden dark:text-telegram-light-muted">
      <i class="fa-solid fa-clipboard text-xl mb-0.5"></i>
      <span>musiqa</span>
    </a>
    <a href="#" class="menu-item relative w-[68px] h-12 flex flex-col items-center justify-center text-telegram-dark-muted my-1.5 no-underline transition-all text-xs rounded overflow-hidden dark:text-telegram-light-muted">
      <i class="fa-solid fa-graduation-cap text-xl mb-0.5"></i>
      <span>teacher</span>
    </a>
    <a href="#" class="menu-item relative w-[68px] h-12 flex flex-col items-center justify-center text-telegram-dark-muted my-1.5 no-underline transition-all text-xs rounded overflow-hidden dark:text-telegram-light-muted">
      <i class="fa-solid fa-users text-xl mb-0.5"></i>
      <span>tanishlar</span>
      <span class="unread-count absolute -top-0.5 right-2.5 bg-telegram-dark-accent text-white rounded-full min-w-[16px] h-4 text-xs flex items-center justify-center px-1 font-medium">5</span>
    </a>
    <a href="#" class="menu-item relative w-[68px] h-12 flex flex-col items-center justify-center text-telegram-dark-muted my-1.5 no-underline transition-all text-xs rounded overflow-hidden dark:text-telegram-light-muted">
      <i class="fa-solid fa-folder text-xl mb-0.5"></i>
      <span>oquvchilar</span>
    </a>
    <a href="#" class="menu-item relative w-[68px] h-12 flex flex-col items-center justify-center text-telegram-dark-muted my-1.5 no-underline transition-all text-xs rounded overflow-hidden dark:text-telegram-light-muted">
      <i class="fa-solid fa-sliders text-xl mb-0.5"></i>
      <span>Edit</span>
    </a>
  </div>

  <!-- Content -->
  <div class="content flex-grow bg-telegram-dark-bg overflow-y-auto flex flex-col relative transition-all dark:bg-telegram-light-bg">
    <!-- Search bar -->
    <div class="search-container px-3.5 py-3 bg-telegram-dark-sidebar border-b border-telegram-dark-border transition-all dark:bg-telegram-light-sidebar dark:border-telegram-light-border">
      <div class="search-box flex items-center bg-telegram-dark-search rounded-lg px-3 py-2 transition-all dark:bg-telegram-light-search">
        <i class="fas fa-search text-telegram-dark-muted mr-2 text-base transition-all dark:text-telegram-light-muted"></i>
        <input type="text" placeholder="Search" id="search-input" class="flex-1 border-none bg-transparent text-telegram-dark-text text-sm outline-none transition-all dark:text-telegram-light-text placeholder-telegram-dark-muted dark:placeholder-telegram-light-muted">
      </div>
    </div>
    
    <!-- Chats list -->
    <div class="chats-container flex-1 overflow-y-auto scrollbar-hide" id="chats-list">
      <div class="chat-section-title text-sm text-telegram-dark-muted px-4 py-3 transition-all dark:text-telegram-light-muted">Archived chats</div>
      
      <div class="chat-item flex px-4 py-2.5 cursor-pointer transition-all border-b border-opacity-5 border-white dark:border-black">
        <img class="chat-avatar w-12 h-12 rounded-full bg-telegram-dark-accent flex items-center justify-center font-bold text-lg text-white mr-3 flex-shrink-0" src="{% static 'img/IT.png' %}" alt="">
        <div class="chat-info flex-1 min-w-0">
          <div class="chat-header flex justify-between items-center mb-1">
            <div class="chat-name font-medium text-sm whitespace-nowrap overflow-hidden text-ellipsis transition-all">IT House /DChj/ 16:00 Frontend Shukurulloh. IT ...</div>
            <div class="chat-time text-xs text-telegram-dark-muted flex-shrink-0 transition-all dark:text-telegram-light-muted">16:00</div>
          </div>
          <div class="chat-preview text-xs text-telegram-dark-muted whitespace-nowrap overflow-hidden text-ellipsis transition-all dark:text-telegram-light-muted">Frontend darslari bo'yicha muzokara</div>
        </div>
      </div>
      
      <div class="chat-item flex px-4 py-2.5 cursor-pointer transition-all border-b border-opacity-5 border-white dark:border-black">
        <img class="chat-avatar w-12 h-12 rounded-full bg-telegram-dark-accent flex items-center justify-center font-bold text-lg text-white mr-3 flex-shrink-0" src="{% static 'img/shukrulloh-aka.png' %}" alt="">
        <div class="chat-info flex-1 min-w-0">
          <div class="chat-header flex justify-between items-center mb-1">
            <div class="chat-name font-medium text-sm whitespace-nowrap overflow-hidden text-ellipsis transition-all">Shukurulloh Ergashev</div>
            <div class="chat-time text-xs text-telegram-dark-muted flex-shrink-0 transition-all dark:text-telegram-light-muted">21:28</div>
          </div>
          <div class="chat-preview text-xs text-telegram-dark-muted whitespace-nowrap overflow-hidden text-ellipsis transition-all dark:text-telegram-light-muted">Ha</div>
        </div>
      </div>
      
      <div class="chat-item flex px-4 py-2.5 cursor-pointer transition-all border-b border-opacity-5 border-white dark:border-black">
        <img class="chat-avatar w-12 h-12 rounded-full bg-telegram-dark-accent flex items-center justify-center font-bold text-lg text-white mr-3 flex-shrink-0" src="{% static 'img/IT.png' %}" alt="">
        <div class="chat-info flex-1 min-w-0">
          <div class="chat-header flex justify-between items-center mb-1">
            <div class="chat-name font-medium text-sm whitespace-nowrap overflow-hidden text-ellipsis transition-all">üìå IT House / SPSH / 09:30B Shukurullo</div>
            <div class="chat-time text-xs text-telegram-dark-muted flex-shrink-0 transition-all dark:text-telegram-light-muted">10:50</div>
          </div>
          <div class="chat-preview text-xs text-telegram-dark-muted whitespace-nowrap overflow-hidden text-ellipsis transition-all dark:text-telegram-light-muted">Drafit</div>
        </div>
      </div>
      
      <div class="chat-item flex px-4 py-2.5 cursor-pointer transition-all border-b border-opacity-5 border-white dark:border-black">
        <div class="chat-avatar w-12 h-12 rounded-full bg-telegram-dark-accent flex items-center justify-center font-bold text-lg text-white mr-3 flex-shrink-0">A</div>
        <div class="chat-info flex-1 min-w-0">
          <div class="chat-header flex justify-between items-center mb-1">
            <div class="chat-name font-medium text-sm whitespace-nowrap overflow-hidden text-ellipsis transition-all">Afshona </div>
            <div class="chat-time text-xs text-telegram-dark-muted flex-shrink-0 transition-all dark:text-telegram-light-muted">14:25</div>
          </div>
          <div class="chat-preview text-xs text-telegram-dark-muted whitespace-nowrap overflow-hidden text-ellipsis transition-all dark:text-telegram-light-muted">Afshona  joined Telegram</div>
        </div>
      </div>
      
      <div class="chat-item flex px-4 py-2.5 cursor-pointer transition-all border-b border-opacity-5 border-white dark:border-black">
        <img class="chat-avatar w-12 h-12 rounded-full bg-telegram-dark-accent flex items-center justify-center font-bold text-lg text-white mr-3 flex-shrink-0" src="{% static 'img/telegram.png' %}" alt="">
        <div class="chat-info flex-1 min-w-0">
          <div class="chat-header flex justify-between items-center mb-1">
            <div class="chat-name font-medium text-sm whitespace-nowrap overflow-hidden text-ellipsis transition-all">Telegram  </div>
            <div class="chat-time text-xs text-telegram-dark-muted flex-shrink-0 transition-all dark:text-telegram-light-muted">09:44</div>
          </div>
          <div class="chat-preview text-xs text-telegram-dark-muted whitespace-nowrap overflow-hidden text-ellipsis transition-all dark:text-telegram-light-muted">–ö–æ–¥ –¥–ª—è –≤—Ö–æ–¥–∞ –≤ Telegram:  . –ù–µ –¥–∞–≤–∞–π—Ç–µ –∫–æ–¥ H...</div>
        </div>
      </div>
      
      <div class="chat-item flex px-4 py-2.5 cursor-pointer transition-all border-b border-opacity-5 border-white dark:border-black">
        <div class="chat-avatar w-12 h-12 rounded-full bg-telegram-dark-accent flex items-center justify-center font-bold text-lg text-white mr-3 flex-shrink-0">
          <img class="rounded-full" src="{% static 'img/jasurbek.png' %}" alt="">
        </div>
        <div class="chat-info flex-1 min-w-0">
          <div class="chat-header flex justify-between items-center mb-1">
            <div class="chat-name font-medium text-sm whitespace-nowrap overflow-hidden text-ellipsis transition-all">Jasurbek</div>
            <div class="chat-time text-xs text-telegram-dark-muted flex-shrink-0 transition-all dark:text-telegram-light-muted">Wed</div>
          </div>
          <div class="chat-preview text-xs text-telegram-dark-muted whitespace-nowrap overflow-hidden text-ellipsis transition-all dark:text-telegram-light-muted">17:30 da ketgan</div>
          <div class="chat-status flex items-center justify-end mt-1">
            <i class="fas fa-check-double text-telegram-dark-accent text-sm transition-all dark:text-telegram-light-accent"></i>
          </div>
        </div>
      </div>
      
      <div class="chat-item flex px-4 py-2.5 cursor-pointer transition-all border-b border-opacity-5 border-white dark:border-black">
        <div class="chat-avatar w-12 h-12 rounded-full bg-telegram-dark-accent flex items-center justify-center font-bold text-lg text-white mr-3 flex-shrink-0">
          <img class="rounded-full" src="{% static 'img/16xona.png' %}" alt="">
        </div>
        <div class="chat-info flex-1 min-w-0">
          <div class="chat-header flex justify-between items-center mb-1">
            <div class="chat-name font-medium text-sm whitespace-nowrap overflow-hidden text-ellipsis transition-all">16 xona</div>
            <div class="chat-time text-xs text-telegram-dark-muted flex-shrink-0 transition-all dark:text-telegram-light-muted">21/08/2025</div>
          </div>
          <div class="chat-preview text-xs text-telegram-dark-muted whitespace-nowrap overflow-hidden text-ellipsis transition-all dark:text-telegram-light-muted">menga boshqa yasab koringchi</div>
          <div class="chat-status flex items-center justify-end mt-1">
            <i class="fas fa-check-double text-telegram-dark-accent text-sm transition-all dark:text-telegram-light-accent"></i>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Slide-out menu -->
  <div class="slide-out-menu fixed top-0 left-[-320px] w-80 h-screen bg-telegram-dark-sidebar border-r border-telegram-dark-border overflow-y-auto scrollbar-hide transition-all z-50 shadow-xl dark:bg-telegram-light-sidebar dark:border-telegram-light-border" id="slide-out-menu">
    <div class="menu-header px-5 py-5 border-b border-telegram-dark-border flex items-center bg-telegram-dark-menuHeader transition-all dark:bg-telegram-light-menuHeader dark:border-telegram-light-border">
      <div class="avatar w-10 h-10 bg-telegram-dark-accent rounded-full flex items-center justify-center font-bold text-base text-white mr-3">
        <img class="rounded-full" src="https://humoyun731.netlify.app/humoyun731logo.png" alt="">
      </div>
      <div class="user-info flex-grow">
        <div class="user-name font-medium text-white mb-0.5 transition-all dark:text-telegram-light-text">Humoyun Mamasodiqov</div>
        <div class="user-status text-xs text-telegram-dark-accent cursor-pointer transition-all dark:text-telegram-light-accent">Set Emoji Status</div>
      </div>
      <div class="close-btn text-telegram-dark-muted text-xl cursor-pointer p-1.5 transition-all dark:text-telegram-light-muted" id="close-menu">
        <i class="fas fa-times"></i>
      </div>
    </div>
    
    <div class="menu-content py-2.5">
      <div class="menu-section py-2.5 px-5">
        <div class="menu-section-title text-xs text-telegram-dark-muted mb-2 pl-2 transition-all dark:text-telegram-light-muted">ACCOUNT</div>
        <div class="menu-option flex items-center px-3 py-2.5 rounded-lg cursor-pointer transition-all mb-1">
          <div class="avatar w-7 h-7 bg-telegram-dark-accent rounded-full flex items-center justify-center font-bold text-sm text-white mr-3">
            <img class="rounded-full" src="https://humoyun731.netlify.app/humoyun731logo.png" alt="">
          </div>
          <span class="text-sm text-telegram-dark-text flex-grow transition-all dark:text-telegram-light-text">HUMOYUN</span>
          <span class="badge bg-telegram-dark-accent text-white rounded-full min-w-[20px] h-4.5 text-xs flex items-center justify-center px-1.5 font-medium transition-all">117</span>
        </div>
        <div class="menu-option flex items-center px-3 py-2.5 rounded-lg cursor-pointer transition-all mb-1">
          <div class="avatar w-7 h-7 bg-telegram-dark-accent rounded-full flex items-center justify-center font-bold text-sm text-white mr-3">
            <img class="rounded-full" src="https://humoyun731.netlify.app/humoyun731logo.png" alt="">
          </div>
          <span class="text-sm text-telegram-dark-text flex-grow transition-all dark:text-telegram-light-text">Humoyun Mamasodiqov</span>
        </div>
        <div class="menu-option flex items-center px-3 py-2.5 rounded-lg cursor-pointer transition-all mb-1">
          <i class="fa-solid fa-plus text-telegram-dark-muted text-lg w-6 mr-3 transition-all dark:text-telegram-light-muted"></i>
          <span class="text-sm text-telegram-dark-text flex-grow transition-all dark:text-telegram-light-text">Add Account</span>
        </div>
      </div>
      
      <div class="menu-divider h-px bg-telegram-dark-border my-2.5 transition-all dark:bg-telegram-light-border"></div>
      
      <div class="menu-section py-2.5 px-5">
        <div class="menu-option flex items-center px-3 py-2.5 rounded-lg cursor-pointer transition-all mb-1">
          <i class="fa-solid fa-user text-telegram-dark-muted text-lg w-6 mr-3 transition-all dark:text-telegram-light-muted"></i>
          <span class="text-sm text-telegram-dark-text flex-grow transition-all dark:text-telegram-light-text">My Profile</span>
        </div>
        <div class="menu-option flex items-center px-3 py-2.5 rounded-lg cursor-pointer transition-all mb-1">
          <i class="fa-solid fa-users text-telegram-dark-muted text-lg w-6 mr-3 transition-all dark:text-telegram-light-muted"></i>
          <span class="text-sm text-telegram-dark-text flex-grow transition-all dark:text-telegram-light-text">New Group</span>
        </div>
        <div class="menu-option flex items-center px-3 py-2.5 rounded-lg cursor-pointer transition-all mb-1">
          <i class="fa-solid fa-bullhorn text-telegram-dark-muted text-lg w-6 mr-3 transition-all dark:text-telegram-light-muted"></i>
          <span class="text-sm text-telegram-dark-text flex-grow transition-all dark:text-telegram-light-text">New Channel</span>
        </div>
        <div class="menu-option flex items-center px-3 py-2.5 rounded-lg cursor-pointer transition-all mb-1">
          <i class="fa-solid fa-address-book text-telegram-dark-muted text-lg w-6 mr-3 transition-all dark:text-telegram-light-muted"></i>
          <span class="text-sm text-telegram-dark-text flex-grow transition-all dark:text-telegram-light-text">Contacts</span>
        </div>
        <div class="menu-option flex items-center px-3 py-2.5 rounded-lg cursor-pointer transition-all mb-1">
          <i class="fa-solid fa-phone text-telegram-dark-muted text-lg w-6 mr-3 transition-all dark:text-telegram-light-muted"></i>
          <span class="text-sm text-telegram-dark-text flex-grow transition-all dark:text-telegram-light-text">Calls</span>
        </div>
        <div class="menu-option flex items-center px-3 py-2.5 rounded-lg cursor-pointer transition-all mb-1">
          <i class="fa-solid fa-bookmark text-telegram-dark-muted text-lg w-6 mr-3 transition-all dark:text-telegram-light-muted"></i>
          <span class="text-sm text-telegram-dark-text flex-grow transition-all dark:text-telegram-light-text">Saved Messages</span>
        </div>
        <div class="menu-option flex items-center px-3 py-2.5 rounded-lg cursor-pointer transition-all mb-1">
          <i class="fa-solid fa-gear text-telegram-dark-muted text-lg w-6 mr-3 transition-all dark:text-telegram-light-muted"></i>
          <span class="text-sm text-telegram-dark-text flex-grow transition-all dark:text-telegram-light-text">Settings</span>
        </div>
      </div>
      
      <div class="menu-divider h-px bg-telegram-dark-border my-2.5 transition-all dark:bg-telegram-light-border"></div>
      
      <div class="menu-section py-2.5 px-5">
        <div class="menu-option night-mode-toggle flex items-center justify-between w-full px-3 py-2.5 rounded-lg cursor-pointer transition-all mb-1">
          <div class="flex items-center">
            <i class="fa-solid fa-moon text-telegram-dark-muted text-lg w-6 transition-all dark:text-telegram-light-muted"></i>
            <span class="text-sm text-telegram-dark-text ml-3 transition-all dark:text-telegram-light-text">Night Mode</span>
          </div>
          <div class="toggle-switch w-10 h-5 bg-gray-700 rounded-full cursor-pointer transition-all relative dark:bg-blue-500" id="night-mode-toggle">
            <div class="toggle-knob absolute top-0.5 left-0.5 w-4 h-4 bg-white rounded-full transition-all"></div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Overlay -->
  <div class="overlay fixed top-0 left-0 w-full h-full bg-black bg-opacity-50 hidden z-40 transition-all" id="overlay"></div>

  <!-- Theme switcher -->
  <div class="theme-switcher bg-telegram-dark-sidebarr cursor-pointer shadow-lg transition-all z-50 dark:bg-telegram-light-sidebar" id="theme-switcher">

  </div>

  <script>
    const menuToggle = document.querySelector('.menu-toggle');
    const slideOutMenu = document.getElementById('slide-out-menu');
    const closeMenu = document.getElementById('close-menu');
    const overlay = document.getElementById('overlay');
    const nightModeToggle = document.getElementById('night-mode-toggle');
    const themeSwitcher = document.getElementById('theme-switcher');
    const themeIcon = themeSwitcher.querySelector('i');
    const searchInput = document.getElementById('search-input');
    const chatsList = document.getElementById('chats-list');
    const chatItems = chatsList.querySelectorAll('.chat-item');
    const menuItems = document.querySelectorAll('.menu-item');
    
    // Mavzu (tungi/kunduzgi) ni o'zgartirish
    function toggleTheme() {
      document.body.classList.toggle('dark');
      
      if (document.body.classList.contains('dark')) {
        themeIcon.classList.remove('fa-moon');
        themeIcon.classList.add('fa-sun');
        nightModeToggle.classList.remove('dark:bg-blue-500');
        nightModeToggle.classList.add('bg-gray-700');
        localStorage.setItem('theme', 'light');
      } else {
        themeIcon.classList.remove('fa-sun');
        themeIcon.classList.add('fa-moon');
        nightModeToggle.classList.remove('bg-gray-700');
        nightModeToggle.classList.add('dark:bg-blue-500');
        localStorage.setItem('theme', 'dark');
      }
    }
    
    // Toggle switch uchun ham ishlaydigan qilish
    themeSwitcher.addEventListener('click', toggleTheme);
    nightModeToggle.addEventListener('click', toggleTheme);
    
    // Saqlangan mavzuni yuklash
    const savedTheme = localStorage.getItem('theme');
    if (savedTheme === 'light') {
      document.body.classList.add('dark');
      themeIcon.classList.remove('fa-moon');
      themeIcon.classList.add('fa-sun');
      nightModeToggle.classList.remove('dark:bg-blue-500');
      nightModeToggle.classList.add('bg-gray-700');
    } else {
      nightModeToggle.classList.remove('bg-gray-700');
      nightModeToggle.classList.add('dark:bg-blue-500');
    }
    
    // Menu toggle
    menuToggle.addEventListener('click', function(e) {
      e.preventDefault();
      slideOutMenu.classList.remove('left-[-320px]');
      slideOutMenu.classList.add('left-0');
      overlay.classList.remove('hidden');
      overlay.classList.add('block');
      document.body.style.overflow = 'hidden';
    });
   
    function closeMenuFunc() {
      slideOutMenu.classList.remove('left-0');
      slideOutMenu.classList.add('left-[-320px]');
      overlay.classList.remove('block');
      overlay.classList.add('hidden');
      document.body.style.overflow = 'auto';
    }
    
    closeMenu.addEventListener('click', closeMenuFunc);
    overlay.addEventListener('click', closeMenuFunc);
    
    menuItems.forEach(item => {
      item.addEventListener('click', function(e) {
        if (!this.classList.contains('menu-toggle')) {
          e.preventDefault();
          menuItems.forEach(item => item.classList.remove('bg-telegram-dark-active', 'text-telegram-dark-accentText', 'dark:bg-telegram-light-active', 'dark:text-telegram-light-accent'));
          this.classList.add('bg-telegram-dark-active', 'text-telegram-dark-accentText', 'dark:bg-telegram-light-active', 'dark:text-telegram-light-accent');
        }
      });
    });

    searchInput.addEventListener('input', function() {
      const searchTerm = this.value.toLowerCase();
      
      chatItems.forEach(chat => {
        const chatName = chat.querySelector('.chat-name').textContent.toLowerCase();
        const chatPreview = chat.querySelector('.chat-preview').textContent.toLowerCase();
        
        if (chatName.includes(searchTerm) || chatPreview.includes(searchTerm)) {
          chat.classList.remove('hidden');
          chat.classList.add('flex');
        } else {
          chat.classList.remove('flex');
          chat.classList.add('hidden');
        }
      });
      
      // Bo'sh qidiruv uchun barcha chatlarni ko'rsatish
      if (searchTerm === '') {
        chatItems.forEach(chat => {
          chat.classList.remove('hidden');
          chat.classList.add('flex');
        });
      }
    });
    
    // Chat items funksionalligi
    chatItems.forEach(chat => {
      chat.addEventListener('click', function() {
        chatItems.forEach(item => item.classList.remove('bg-telegram-dark-hover', 'dark:bg-telegram-light-hover'));
        this.classList.add('bg-telegram-dark-hover', 'dark:bg-telegram-light-hover');
      });
    });
    
    // Escape tugmasi bilan menyuni yopish
    document.addEventListener('keydown', function(e) {
      if (e.key === 'Escape') {
        closeMenuFunc();
      }
    });
  </script>

</body>
</html>